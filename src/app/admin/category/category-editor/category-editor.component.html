<h4 class="header bg-info py-4">
  Create New Category
</h4>

<div #pageContent class="page-content">
  <form class="bg-primary form-container" [formGroup]="form">
    <!--Title-->
    <div class="input-container flex-column">
      <label for="title">Title</label>
      <input
        class="input-field bg-info"
        type="text"
        placeholder="title"
        name="title"
        formControlName="title"
        autocomplete="off"
      />
    </div>
    <div
      *ngIf="title.errors && (title.dirty || title.touched)"
      class="input-error"
    >
      Title is required.
    </div>
    <!--Image-->
    <div class="input-container flex-column">
      <label for="image">Image Url/Base64 (?)</label>
      <input
        class="input-field bg-info"
        type="text"
        placeholder="image"
        name="image"
        formControlName="image"
        autocomplete="off"
      />
    </div>
    <!--tests-->
    <div class="input-container flex-column">
      <label for="test">Add Tests (?)</label>
      <!--Added test ID's container-->
      <div class="d-flex flex-nowrap overflow-auto" style="padding: 18px">
        <span *ngFor="let id of tests;let i = index" class="ml-5 position-relative d-inline-block">
          {{id}}
          <button
            class="btn btn-danger btn-add"
            style="position: absolute;top: -100%;right: -36px;"
            (click)="removeTest(i)"
          >
            -
          </button>
        </span>
      </div>
      <!--input test ID-->
      <div>
        <input
          #addTestID
          class="input-field bg-info"
          type="text"
          placeholder="test"
          name="test"
          autocomplete="off"
          style="max-width: 235px;"
          formControlName="testID"
        />
        <button
          class="btn btn-secondary btn-add ml-2"
          (click)="tests.push(addTestID.value)"
        >+</button>
      </div>
    </div>
    <!--Syllabus-->
    <div class="input-container flex-column">
      <label>Syllabus (?)</label>
      <ckeditor
        [editor]="editor"
        (ready)="onReady($event)"
        [config]="editorConfig"
        class="border border-info"
        formControlName="syllabus"
      >
      </ckeditor>
    </div>

    <div class="d-flex justify-content-center">
      <button
        id="submit-btn"
        type="submit"
        class="btn btn-secondary"
        [disabled]="form.invalid"
        (click)="submit()"
        *ngIf="!submitting"
      >
        Submit
      </button>
      <div *ngIf="submitting" class="spinner-grow text-secondary" role="status">
        <span class="sr-only">Loading...</span>
      </div>
    </div>
    <div *ngIf="backendError" class="input-error" style="margin-top: 15px;">
      <pre>{{ backendError }}</pre>
    </div>
  </form>
</div>
